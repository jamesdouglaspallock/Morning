# Replit AI Implementation Prompt: Password Reset Flow Enhancements

Task: Refactor and polish the password reset flow (Forgot Password & Reset Password pages) of the Choice Properties project based on the PASSWORD_RESET_AUDIT_REPORT.md.

1. **Backend Migration & Security**
   - Move all password update and reset logic from the frontend Supabase client to backend-controlled endpoints (/api/v2/auth/*).
   - Implement proper rate limiting, audit logging, and token validation.
   - Ensure expired, reused, or invalid tokens are rejected gracefully.
   - Prevent email enumeration and other security vulnerabilities.

2. **Visual & UI Consistency**
   - Update card layouts to match the modern SaaS style used in the polished Signup and Login pages (use rounded-xl, border-border/50, p-8 for major cards).
   - Standardize input heights (h-11/h-12), typography, and button sizes (h-11, font-medium).
   - Replace legacy shadow-xl cards with the current hover:shadow-md and hover-elevate style.

3. **UX Improvements**
   - Replace text-based loading indicators with Loader2 spinners on submit buttons.
   - Add a password strength meter aligned with the design tokens used elsewhere.
   - Ensure the Confirm Password field validates properly and shows mismatch errors clearly.
   - Display success and error messages consistently with Login/Signup pages.

4. **Accessibility**
   - Ensure all inputs have ARIA labels and proper focus states.
   - Confirm that password fields are masked and not exposed in console logs.

5. **Deliverables**
   - Refactored `forgot-password.tsx` and `reset-password.tsx`.
   - Updated backend endpoints in `/api/v2/auth/`.
   - Fully tested, responsive, secure, and visually consistent password reset flow.
   - Optional: update audit report to mark tasks as implemented.

Please output **full code changes**, including backend and frontend updates, ensuring the flow is secure, visually polished, and consistent with the rest of the Choice Properties authentication pages.